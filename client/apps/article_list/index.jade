extend ../../components/layout/templates/index
include ../../../node_modules/artsy-ezel-components/pagination/paginator

block header
  if published
    | Published Articles
    - var emptyMessage = "published any articles"
  else
    | Drafts
    - var emptyMessage = "written any drafts"


block content
  #article-list-items.max-width-container
    if articles.length == 0
        .article-list-empty
          p You haven't #{emptyMessage} yet
            br
            | _______
          p Artsy Writer is a tool for writing stories about art.
            //- HELP PAGE COMING SOON
            //- br
            //- | Get started by writing an article, or see our
            //- a( href='' ) help page
            //- |  for more info.
          a.avant-garde-button.avant-garde-button-dark.article-new-button( href='/articles/new' )
            include ../../components/layout/public/icons/layout_new_article.svg
            .article-new-text Write An Article
    ul
      for article in articles
        li
          section
            a( href="/articles/#{article.get('id')}/edit" )
              .article-list-item-left
                if article.get('thumbnail_image')
                  - url = resize(article.get('thumbnail_image'), { width: 150 })
                  .article-list-img(
                    style="background-image: url(#{url})"
                  )
                else
                  .article-list-item-placeholder Missing
                    br
                    | thumbnail
              .article-list-item-right
                if article.get('thumbnail_title')
                  h1= article.get('thumbnail_title')
                else
                  h1.article-list-missing Missing title
                .article-list-items-dates
                  if article.get('published_at')
                    strong Published #{moment(article.get('published_at')).fromNow()}
                    | Last saved #{moment(article.get('updated_at')).fromNow()}
                  else
                    strong Last saved #{moment(article.get('updated_at')).fromNow()}
    #article-list-pagination
      +paginate(page, totalPages, '?published=' + published + '&')